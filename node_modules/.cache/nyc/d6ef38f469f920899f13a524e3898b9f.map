{"version":3,"sources":["ireportControl.js"],"names":["recordObject","Record","recordControllers","createNewRecord","req","res","body","title","createdOn","location","comment","image","video","status","send","error","data","createRecord","viewAllRedflags","findAllRecords","viewAllInterventions","viewOneRedflag","recordFound","findOneRecord","params","id","viewOneIntervention","editRedflagComment","updateComment","Number","message"],"mappings":";;;;;;AAAA;;;;;;AACA,IAAMA,eAAe,IAAIC,sBAAJ,EAArB;;AAEA,IAAMC,oBAAoB;AACxBC,iBADwB,2BACRC,GADQ,EACHC,GADG,EACE;AACxB,QAAI,CAACD,IAAIE,IAAJ,CAASC,KAAV,IAAmB,CAACH,IAAIE,IAAJ,CAASE,SAA7B,IAA0C,CAACJ,IAAIE,IAAJ,CAASG,QAApD,IACC,CAACL,IAAIE,IAAJ,CAASI,OADX,IACsB,CAACN,IAAIE,IAAJ,CAASK,KADhC,IACyC,CAACP,IAAIE,IAAJ,CAASM,KADvD,EAC8D;AAC5D,aAAOP,IAAIQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEC,OAAO,iBAAT,EAArB,CAAP;AACD;AACD,WAAOV,IAAIQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEE,MAAM,CAAChB,aAAaiB,YAAb,CAA0Bb,IAAIE,IAA9B,CAAD,CAAR,EAArB,CAAP;AACD,GAPuB;AASxBY,iBATwB,2BASRd,GATQ,EASHC,GATG,EASE;AACxBA,QAAIQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEE,MAAM,CAAChB,aAAamB,cAAb,CAA4B,SAA5B,CAAD,CAAR,EAArB;AACD,GAXuB;AAaxBC,sBAbwB,gCAaHhB,GAbG,EAaEC,GAbF,EAaO;AAC7BA,QAAIQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEE,MAAM,CAAChB,aAAamB,cAAb,CAA4B,cAA5B,CAAD,CAAR,EAArB;AACD,GAfuB;AAiBxBE,gBAjBwB,0BAiBTjB,GAjBS,EAiBJC,GAjBI,EAiBC;AACvB,QAAMiB,cAActB,aAAauB,aAAb,CAA2BnB,IAAIoB,MAAJ,CAAWC,EAAtC,CAApB;AACA,QAAI,CAACH,WAAL,EAAkB;AAChBjB,UAAIQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEC,OAAO,kBAAT,EAArB;AACD,KAFD,MAEO;AACLV,UAAIQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEE,MAAM,CAACM,WAAD,CAAR,EAArB;AACD;AACF,GAxBuB;AA0BxBI,qBA1BwB,+BA0BJtB,GA1BI,EA0BCC,GA1BD,EA0BM;AAC5B,QAAI,CAACL,aAAauB,aAAb,CAA2BnB,IAAIoB,MAAJ,CAAWC,EAAtC,CAAL,EAAgD;AAC9CpB,UAAIQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEC,OAAO,kBAAT,EAArB;AACD,KAFD,MAEO;AACLV,UAAIQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEE,MAAM,CAAChB,aAAauB,aAAb,CAA2BnB,IAAIoB,MAAJ,CAAWC,EAAtC,CAAD,CAAR,EAArB;AACD;AACF,GAhCuB;AAkCxBE,oBAlCwB,8BAkCLvB,GAlCK,EAkCAC,GAlCA,EAkCK;AAC3B,QAAI,CAACL,aAAauB,aAAb,CAA2BnB,IAAIoB,MAAJ,CAAWC,EAAtC,CAAL,EAAgD;AAC9CpB,UAAIQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEC,OAAO,kBAAT,EAArB;AACD,KAFD,MAEO;AACLf,mBAAa4B,aAAb,CAA2BxB,IAAIoB,MAAJ,CAAWC,EAAtC,EAA0CrB,IAAIE,IAA9C;AACAD,UAAIQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEE,MAAM,EAAES,IAAII,OAAOzB,IAAIoB,MAAJ,CAAWC,EAAlB,CAAN,EAA6BK,SAAS,oCAAtC,EAAR,EAArB;AACD;AACF;AAzCuB,CAA1B;;kBA6Ce5B,iB","file":"ireportControl.js","sourceRoot":"C:/Users/CyberCloned/Documents/Zokky/Andela/iReporterApp/src/controllers","sourcesContent":["import Record from '../models/ireportModel';\r\nconst recordObject = new Record();\r\n\r\nconst recordControllers = {\r\n  createNewRecord(req, res) {\r\n    if (!req.body.title || !req.body.createdOn || !req.body.location\r\n      || !req.body.comment || !req.body.image || !req.body.video) {\r\n      return res.status(400).send({ error: 'Incomplete data' });\r\n    }\r\n    return res.status(201).send({ data: [recordObject.createRecord(req.body)] });\r\n  },\r\n\r\n  viewAllRedflags(req, res) {\r\n    res.status(200).send({ data: [recordObject.findAllRecords('redflag')] });\r\n  },\r\n\r\n  viewAllInterventions(req, res) {\r\n    res.status(200).send({ data: [recordObject.findAllRecords('intervention')] });\r\n  },\r\n\r\n  viewOneRedflag(req, res) {\r\n    const recordFound = recordObject.findOneRecord(req.params.id);\r\n    if (!recordFound) {\r\n      res.status(404).send({ error: 'Record not found' });\r\n    } else {\r\n      res.status(200).send({ data: [recordFound] });\r\n    }\r\n  },\r\n\r\n  viewOneIntervention(req, res) {\r\n    if (!recordObject.findOneRecord(req.params.id)) {\r\n      res.status(404).send({ error: 'Record not found' });\r\n    } else {\r\n      res.status(200).send({ data: [recordObject.findOneRecord(req.params.id)] });\r\n    }\r\n  },\r\n\r\n  editRedflagComment(req, res) {\r\n    if (!recordObject.findOneRecord(req.params.id)) {\r\n      res.status(404).send({ error: 'Record not found' });\r\n    } else {\r\n      recordObject.updateComment(req.params.id, req.body)\r\n      res.status(200).send({ data: { id: Number(req.params.id), message: 'Updated red-flag record\\'s comment' } });\r\n    }\r\n  },\r\n\r\n};\r\n\r\nexport default recordControllers;\r\n"]}