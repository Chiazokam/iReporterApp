{"version":3,"sources":["middleware.js"],"names":["express","require","bodyParser","check","validationResult","app","use","urlencoded","extended","middleware","postValidation","req","res","next","body","title","createdOn","location","comment","image","video","errors","status","send","error"],"mappings":";;;;;AAAA,IAAMA,UAAUC,QAAQ,SAAR,CAAhB;AACA,IAAMC,aAAaD,QAAQ,aAAR,CAAnB;;eACoCA,QAAQ,yBAAR,C;IAA5BE,K,YAAAA,K;IAAOC,gB,YAAAA,gB;;AAEf,IAAMC,MAAML,SAAZ;AACAK,IAAIC,GAAJ,CAAQJ,WAAWK,UAAX,CAAsB,EAAEC,UAAU,IAAZ,EAAtB,CAAR;;AAEA,IAAMC,aAAa;AACjBC,gBADiB,0BACFC,GADE,EACGC,GADH,EACQC,IADR,EACc;AAAA,oBACiCF,IAAIG,IADrC;AAAA,QACrBC,KADqB,aACrBA,KADqB;AAAA,QACdC,SADc,aACdA,SADc;AAAA,QACHC,QADG,aACHA,QADG;AAAA,QACOC,OADP,aACOA,OADP;AAAA,QACgBC,KADhB,aACgBA,KADhB;AAAA,QACuBC,KADvB,aACuBA,KADvB;;AAE7B,QAAMC,SAAS,EAAf;AACA,QAAI,CAACN,KAAD,IAAU,CAACC,SAAX,IAAwB,CAACC,QAAzB,IAAqC,CAACC,OAA1C,EAAmD;AACjD,UAAI,CAACH,KAAL,EAAY;AACVM,eAAO,OAAP,IAAkB,eAAlB;AACD;AACD,UAAI,CAACL,SAAL,EAAgB;AACdK,eAAO,WAAP,IAAsB,cAAtB;AACD;AACD,UAAI,CAACJ,QAAL,EAAe;AACbI,eAAO,UAAP,IAAqB,kBAArB;AACD;AACD,UAAI,CAACH,OAAL,EAAc;AACZG,eAAO,SAAP,IAAoB,iBAApB;AACD;AACD,UAAIA,MAAJ,EAAY;AACV,eAAOT,IAAIU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEC,OAAOH,MAAT,EAArB,CAAP;AACD;AACF;AACDR;AACD;AAtBgB,CAAnB;;kBAyBeJ,U","file":"middleware.js","sourceRoot":"C:/Users/CyberCloned/Documents/Zokky/Andela/iReporterApp/src","sourcesContent":["const express = require('express');\r\nconst bodyParser = require('body-parser');\r\nconst { check, validationResult } = require('express-validator/check');\r\n\r\nconst app = express();\r\napp.use(bodyParser.urlencoded({ extended: true }));\r\n\r\nconst middleware = {\n  postValidation(req, res, next) {\n    const { title, createdOn, location, comment, image, video } = req.body;\r\n    const errors = {};\r\n    if (!title || !createdOn || !location || !comment) {\r\n      if (!title) {\r\n        errors['title'] = 'Missing title';\r\n      }\r\n      if (!createdOn) {\r\n        errors['createdOn'] = 'Missing date';\r\n      }\r\n      if (!location) {\r\n        errors['location'] = 'Missing location';\r\n      }\r\n      if (!comment) {\r\n        errors['comment'] = 'Missing comment';\r\n      }\r\n      if (errors) {\r\n        return res.status(400).send({ error: errors });\r\n      }\r\n    }\n    next();\n  },\n};\n\r\nexport default middleware;\r\n"]}